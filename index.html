<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>melink by siyanhui</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>melink</h1>
        <h2></h2>

        <section id="downloads">
          <a href="https://github.com/siyanhui/melink/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/siyanhui/melink/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/siyanhui/melink" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a id="me-link-文档" class="anchor" href="#me-link-%E6%96%87%E6%A1%A3" aria-hidden="true"><span class="octicon octicon-link"></span></a>me Link 文档</h1>

<p><strong>版本</strong> v0.4</p>

<h2>
<a id="app接入" class="anchor" href="#app%E6%8E%A5%E5%85%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>App接入</h2>

<ul>
<li>参考<a href="resources/app_link.md">App接入指南</a>
</li>
</ul>

<h2>
<a id="发起api请求" class="anchor" href="#%E5%8F%91%E8%B5%B7api%E8%AF%B7%E6%B1%82" aria-hidden="true"><span class="octicon octicon-link"></span></a>发起API请求</h2>

<p><strong>API根路径</strong> - <code>https://api.stampmeapp.com/{v1}/{appid}/</code>, 其中 <code>/{v1}</code> 为API版本号, <code>{appid}</code> 为应用ID<br>
({appid}的获取方式,参考 <strong>App接入</strong> 部分) 
测试API采用 <code>HTTP</code> 请求方式, 线上API只支持 <code>HTTPS</code>  </p>

<p>若需要请求所有的大头贴素材分组,则在根路径下加上大头贴素材资源的子路径:   <a href="https://api.stampmeapp.com/%7Bv1%7D/%7Bappid%7D/materials/expression/group.json">https://api.stampmeapp.com/{v1}/{appid}/materials/expression/group.json</a>  </p>

<p>如果是 <code>curl</code> 测试的话,完整的请求如下:  </p>

<div class="highlight highlight-shell"><pre>curl -u appid:appsecret -H <span class="pl-s1"><span class="pl-pds">'</span>User-Agent: MyApp (yourname@example.com)<span class="pl-pds">'</span></span> https://api.stampmeapp.com/{v1}/{appid}/materials/expression/groups.json</pre></div>

<p>如果需要创建大头贴素材, 使用的是同一个资源，不同的是需要加上 <code>Content-Type</code> :  </p>

<div class="highlight highlight-shell"><pre>curl -u appid:appsecret \
  -H <span class="pl-s1"><span class="pl-pds">'</span>Content-Type: Application/json<span class="pl-pds">'</span></span> \
  -H <span class="pl-s1"><span class="pl-pds">'</span>User-Agent: MyApp (yourname@example.com)<span class="pl-pds">'</span></span> \
  -d <span class="pl-s1"><span class="pl-pds">'</span>{ "name": "配饰1" }<span class="pl-pds">'</span></span> \
  https://api.stampmeapp.com/{v1}/{appid}/emoticons/groups.json</pre></div>

<h2>
<a id="数据格式" class="anchor" href="#%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>数据格式</h2>

<p>API仅支持<code>JSON</code>格式, 该<code>JSON</code>数据没有根元素, 其中的属性字段我们采用 <code>snake_case</code> 来描述<br>
当对API使用 <code>POST</code> 和 <code>PUT</code> 方法时, 请在请求头部加入 <code>Content-Type: Application/json; charset=utf-8</code><br>
<strong>所有的API请求以 .json 结尾,代表我们仅接受与返回JSON</strong>  </p>

<h2>
<a id="使用http缓存--" class="anchor" href="#%E4%BD%BF%E7%94%A8http%E7%BC%93%E5%AD%98--" aria-hidden="true"><span class="octicon octicon-link"></span></a>使用HTTP缓存  </h2>

<p>为提高接入应用的请求和响应速度,同时降低服务器负载,多数(尤其是数据量大)的返回数据我们会加上 <code>Last-Modified</code> 头部, 当第一次请求
某个资源时,保存该 <code>Last-Modified</code> 值, 后续的请求将该值作为 <code>If-Modified-Since</code> 重新发回服务器,如果资源没有任何变化, 服务器则
返回 <code>304 Not Modified</code>  </p>

<h2>
<a id="错误处理" class="anchor" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86" aria-hidden="true"><span class="octicon octicon-link"></span></a>错误处理</h2>

<p>当API服务器遇到问题时,你会看到 5xx 的错误反馈, 举例如下:  </p>

<ul>
<li><code>500 API Server Down</code></li>
<li><code>502 Bad Gateway</code></li>
<li><code>503 Service Unavailable</code></li>
<li><code>504 Gateway Timeout</code></li>
</ul>

<h2>
<a id="可用api列表" class="anchor" href="#%E5%8F%AF%E7%94%A8api%E5%88%97%E8%A1%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>可用API列表</h2>

<ul>
<li>
<a href="resources/auth.md">Auth</a> - App认证授权相关接口</li>
<li>
<a href="resources/user_basic.md">User Basic</a> - 用户基本接口</li>
<li>
<a href="resources/user_roles.md">User Roles</a> - 用户角色相关接口</li>
<li>
<a href="resources/user_emoticons.md">User Emoticons</a> - 用户大头贴相关接口</li>
<li>
<a href="resources/user_expressions.md">User Expressions</a> - 用户动态表情相关接口</li>
<li>
<a href="resources/materials.md">Materials</a> - 分组与素材相关接口(Me App专用)</li>
<li>
<a href="resources/open.md">Open</a> - 对外开放数据接口</li>
<li>
<a href="resources/page.md">Page</a> - 页面接入接口</li>
</ul>
      </section>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-4316341-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>